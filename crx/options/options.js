(()=>{let e;function t(e){return[`oklch(5% .1 ${e})`,`oklch(13% .2 ${e})`,`oklch(25% .2 ${e})`,`oklch(35% .25 ${e})`,`oklch(50% .27 ${e})`,`oklch(67% .31 ${e})`,`oklch(72% .25 ${e})`,`oklch(80% .2 ${e})`,`oklch(90% .1 ${e})`,`oklch(99% .05 ${e})`,"#ccc"]}Object.defineProperty({},"Options",{get:()=>r,set:void 0,enumerable:!0,configurable:!0});let s=["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2","#cccccc"],i=t(320),n=t(200),o={DEFAULT:s,PINK:i,BLUE:n};class r{constructor({preferredAssessmentMode:e=r.AssessmentMode.STATIC,validation:t=!0,palette:i=s,loggingPrefix:n="Capo: "}={}){this.setPreferredAssessmentMode(e),this.setValidation(t),this.setPalette(i),this.setLoggingPrefix(n)}static get AssessmentMode(){return{STATIC:"static",DYNAMIC:"dynamic"}}static get Palettes(){return o}prefersStaticAssessment(){return this.preferredAssessmentMode===r.AssessmentMode.STATIC}prefersDynamicAssessment(){return this.preferredAssessmentMode===r.AssessmentMode.DYNAMIC}isValidationEnabled(){return this.validation}setPreferredAssessmentMode(e){if(!this.isValidAssessmentMode(e))throw Error(`Invalid option: preferred assessment mode, expected AssessmentMode.STATIC or AssessmentMode.DYNAMIC, got "${e}".`);this.preferredAssessmentMode=e}setPreferredAssessmentModeToStatic(e){let t=r.AssessmentMode.STATIC;e||(t=r.AssessmentMode.DYNAMIC),this.setPreferredAssessmentMode(t)}setValidation(e){if(!this.isValidValidation(e))throw Error(`Invalid option: validation, expected boolean, got "${e}".`);this.validation=e}setPalette(e){if(!this.isValidPalette(e))throw Error(`Invalid option: palette, expected [${Object.keys(o).join("|")}] or an array of colors, got "${e}".`);if("string"==typeof e){this.palette=o[e];return}this.palette=e}setLoggingPrefix(e){if(!this.isValidLoggingPrefix(e))throw Error(`Invalid option: logging prefix, expected string, got "${e}".`);this.loggingPrefix=e}isValidAssessmentMode(e){return Object.values(r.AssessmentMode).includes(e)}isValidValidation(e){return"boolean"==typeof e}isValidPalette(e){return"string"==typeof e?Object.keys(o).includes(e):!!Array.isArray(e)&&11===e.length&&e.every(e=>"string"==typeof e)}isValidLoggingPrefix(e){return"string"==typeof e}isPreferredPalette(e){return JSON.stringify(this.palette)==JSON.stringify(e)}valueOf(){return{preferredAssessmentMode:this.preferredAssessmentMode,validation:this.validation,palette:this.palette,loggingPrefix:this.loggingPrefix}}}async function a(){let t=await chrome.storage.sync.get("options");e=new r(t.options)}async function d(t){let s;let i=t.target.dataset.option;switch(i){case"PREFERRED_ASSESSMENT_MODE":s=t.target.checked,e.setPreferredAssessmentModeToStatic(s);break;case"VALIDATION":s=t.target.checked,e.setValidation(s);break;case"PALETTE":s=t.target.value,e.setPalette(s);break;default:console.warn(`Unknown option: ${i}`);return}await chrome.storage.sync.set({options:e.valueOf()}),await chrome.storage.sync.get("options")}!async function(){await a(),function(){let t=document.getElementById("prefer-static"),s=document.getElementById("validation"),i=document.getElementById("palette");t.checked=e.prefersStaticAssessment(),t.dataset.option="PREFERRED_ASSESSMENT_MODE",s.checked=e.isValidationEnabled(),s.dataset.option="VALIDATION",Object.entries(r.Palettes).forEach(([t,s])=>{let n=document.createElement("option");n.textContent=t,n.value=t,n.selected=e.isPreferredPalette(s),n.dataset.colors=JSON.stringify(s),i.appendChild(n)}),i.dataset.option="PALETTE",function(){let e=document.getElementById("options");e.addEventListener("change",d)}()}()}()})();