---
title: The rules of capo.js
description: Learn how capo.js classifies and scores elements.
tableOfContents:
  maxHeadingLevel: 4
---

import InlineCapoWeightBars from '../../../components/InlineCapoWeightBars.astro';
import { Tabs, TabItem } from '@astrojs/starlight/components';


Elements are categorized into 11 groups. Each group has an associated weight to determine the optimal sort order. Elements within the same group are considered equal weight and displayed in the order they're found in the document.

## <InlineCapoWeightBars weight="11" /> 11. Pragma directives

Pragma directives are the highest weighted elements in capo.js. They tell the browser how to parse or handle the document, so they must be discovered **as early as possible** to avoid race conditions with other content.

### `<meta http-equiv>`

The `http-equiv` meta tag is used to set directives equivalent to HTTP headers (<a href="https://rviscomi.dev/2023/07/you-probably-dont-need-http-equiv-meta-tags/">sorta</a>). 

#### Origin trials

Origin trials can be one type of `http-equiv` meta tag. These tags allow developers to test new web platform features on a per-origin basis.

See [origin trial validation](/capo.js/user/validation/#no-invalid-origin-trials) for more information about how capo.js validates origin trial tokens.

### `<meta charset>`

Every page must declare a character encoding of `UTF-8`, using either the `charset` meta tag or the `Content-Type` HTTP response header. When the meta tag is used, it must be discoverable within the first 1024 bytes of the document. To avoid encoding issues with user-visible content like the `<title>` element, capo.js requires that it be in the foremost group of elements.

### `<meta name=viewport>`

### `<base>`

## <InlineCapoWeightBars weight="10" /> 10. Title

### `<title>`

## <InlineCapoWeightBars weight="9" /> 9. Preconnect hints

### `<link rel=preconnect>`

## <InlineCapoWeightBars weight="8" /> 8. Asynchronous scripts

### `<script async src>`

## <InlineCapoWeightBars weight="7" /> 7. Import styles

### `@import`

## <InlineCapoWeightBars weight="6" /> 6. Synchronous scripts

### `<script src>`

## <InlineCapoWeightBars weight="5" /> 5. Synchronous styles

### `<link rel=stylesheet>`

### `<style>`

## <InlineCapoWeightBars weight="4" /> 4. Preload hints

### `<link rel=preload>`

### `<link rel=modulepreload>`

## <InlineCapoWeightBars weight="3" /> 3. Deferred scripts

### `<script defer src>`

## <InlineCapoWeightBars weight="2" /> 2. Prefetch and prerender hints

### `<link rel=prefetch>`

### `<link rel=dns-prefetch>`

### `<link rel=prerender>`

## <InlineCapoWeightBars weight="1" /> 1. Everything else
